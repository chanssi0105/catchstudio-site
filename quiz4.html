<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>브랜드 퀴즈</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- 기본 파비콘 -->
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon-quiz.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/assets/images/favicon-quiz.png">

  <style>
    * { box-sizing: border-box; }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: #ffffff;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: #111827;
    }

    body { overflow: hidden; }

    .screen {
      display: none;
      width: 100%;
      height: 100vh;
      padding: 24px 16px;
    }

    .screen.active {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    /* 버튼 공통 */
    .btn {
      border: none;
      border-radius: 999px;
      padding: 18px 32px;
      font-size: 40px;
      font-weight: 700;
      cursor: pointer;
      background: #111827;
      color: #ffffff;
      box-shadow: 0 3px 0 rgba(0,0,0,0.25);
      min-width: 220px;
      text-align: center;
      transition:
        transform 0.06s ease-out,
        box-shadow 0.06s ease-out;
    }

    .btn:active {
      transform: translateY(2px);
      box-shadow: 0 0 0 rgba(0,0,0,0.25);
    }

    .btn-primary { background: #2563eb; }

    .btn-next {
      background: #2563eb;
      flex: 1;
    }

    .btn-back {
      background: #6b7280;
      flex: 1;
    }

    .btn-small {
      padding: 8px 16px;
      font-size: 18px;
      min-width: auto;
      background: transparent;
      color: #666;
      border-radius: 100px;
      border: 1px solid #999;
      box-shadow: none;
    }

    #screen-start .title {
      font-size: clamp(4rem, 6vw, 8rem);
      font-weight: 700;
      margin-bottom: 16px;
      text-align: center;
    }

    /* 퀴즈 화면 */
    #screen-quiz { position: relative; }

    #btnExit {
      position: absolute;
      top: 16px;
      right: 16px;
    }

    /* 좌측 상단 진행도 */
    #progressText {
      position: absolute;
      top: 16px;
      left: 16px;
      font-size: 24px;
      font-weight: 600;
      color: #333;
    }

    .word-wrapper {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
    }

    .big-word {
      width: 100%;
      text-align: center;
      font-size: clamp(4rem, 14vw, 14rem);
      font-weight: 800;
      white-space: pre-line;
      line-height: 1.2;
    }

    .bottom-area {
      width: 100%;
      margin-bottom: 5%;
    }

    .bottom-buttons {
      display: flex;
      gap: 12px;
      width: 100%;
    }

    /* 완료 화면 */
    #screen-finished .title {
      font-size: 40px;
      font-weight: 700;
      margin-bottom: 20px;
      text-align: center;
    }

    #screen-finished .text {
      font-size: 22px;
      color: #4b5563;
      line-height: 1.6;
      margin-bottom: 40px;
      text-align: center;
      white-space: pre-line;
    }
  </style>
</head>

<body>

  <!-- 시작 화면 -->
  <div id="screen-start" class="screen active">
    <div class="title">브랜드 퀴즈</div>
    <button id="btnStart" class="btn btn-primary">시작</button>
  </div>

  <!-- 게임 화면 -->
  <div id="screen-quiz" class="screen">
    <div id="progressText">0/0</div>
    <button id="btnExit" class="btn btn-small">종료</button>

    <div class="word-wrapper">
      <div id="currentWord" class="big-word">시작하세요</div>
    </div>

    <div class="bottom-area">
      <div class="bottom-buttons">
        <button id="btnBack" class="btn btn-back">뒤로가기</button>
        <button id="btnNext" class="btn btn-next">다음</button>
      </div>
    </div>
  </div>

  <!-- 완료 화면 -->
  <div id="screen-finished" class="screen">
    <div class="title">모든 제시어 완료!</div>
    <div class="text">
준비된 모든 제시어를 다 사용했어요.
다시 시작하려면 아래 버튼을 눌러주세요.
    </div>

    <button id="btnHome" class="btn btn-primary">첫 화면으로</button>
  </div>

  <script>
    // 실제 게임 제시어들
    const ALL_WORDS = [
      "님자로 끝나는 말은",
      "자동차 브랜드",
      "라면 제품",
      "편의점",
      "스포츠 운동 브랜드",
      "치킨 브랜드",
      "피자 브랜드",
      "카페 브랜드"
    ];

    // 예시 제시어
    const EXAMPLE_TEXT = "예시)\n과일";

    let wordOrder = [];
    let totalCount = ALL_WORDS.length;
    let currentIndex = -1;   // -1이면 아직 실제 제시어 시작 전
    let isOnExample = false; // true면 예시 화면 상태

    const screenStart = document.getElementById("screen-start");
    const screenQuiz = document.getElementById("screen-quiz");
    const screenFinished = document.getElementById("screen-finished");

    const btnStart = document.getElementById("btnStart");
    const btnNext = document.getElementById("btnNext");
    const btnBack = document.getElementById("btnBack");
    const btnExit = document.getElementById("btnExit");
    const btnHome = document.getElementById("btnHome");

    const currentWordEl = document.getElementById("currentWord");
    const progressText = document.getElementById("progressText");

    function showScreen(name) {
      screenStart.classList.remove("active");
      screenQuiz.classList.remove("active");
      screenFinished.classList.remove("active");

      if (name === "start") screenStart.classList.add("active");
      if (name === "quiz") screenQuiz.classList.add("active");
      if (name === "finished") screenFinished.classList.add("active");
    }

    // 배열 섞기 (Fisher-Yates)
    function shuffle(array) {
      const arr = [...array];
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function resetWords() {
      wordOrder = shuffle(ALL_WORDS);
      currentIndex = -1;
      isOnExample = false;
      updateProgress();
    }

    function updateProgress() {
      // 예시는 0/전체 로 표시
      if (isOnExample || currentIndex < 0) {
        progressText.textContent = `0/${totalCount}`;
      } else {
        const used = currentIndex + 1;
        progressText.textContent = `${used}/${totalCount}`;
      }
    }

    function showExample() {
      isOnExample = true;
      currentIndex = -1;
      currentWordEl.textContent = EXAMPLE_TEXT;
      updateProgress();
    }

    function showCurrentWord() {
      if (currentIndex >= 0 && currentIndex < wordOrder.length) {
        currentWordEl.textContent = wordOrder[currentIndex];
      }
      updateProgress();
    }

    // 전체화면 진입
    function enterFullscreen() {
      const elem = document.documentElement;
      if (elem.requestFullscreen) elem.requestFullscreen();
      else if (elem.webkitRequestFullscreen) elem.webkitRequestFullscreen();
      else if (elem.msRequestFullscreen) elem.msRequestFullscreen();
    }

    // 시작 버튼: 예시부터 보여주기
    btnStart.addEventListener("click", () => {
      enterFullscreen();
      resetWords();
      showExample();
      showScreen("quiz");
    });

    // 다음 버튼
    btnNext.addEventListener("click", () => {
      // 예시 → 첫 실제 제시어로 이동
      if (isOnExample) {
        isOnExample = false;
        currentIndex = 0;
        showCurrentWord();
        return;
      }

      // 실제 제시어 진행
      if (currentIndex < wordOrder.length - 1) {
        currentIndex++;
        showCurrentWord();
      } else {
        // 마지막 제시어에서 다음 누르면 종료 화면
        showScreen("finished");
      }
    });

    // 뒤로가기 버튼
    btnBack.addEventListener("click", () => {
      // 실제 제시어에서 뒤로가기
      if (!isOnExample && currentIndex > 0) {
        currentIndex--;
        showCurrentWord();
        return;
      }

      // 첫 번째 제시어에서 뒤로가기 → 예시로 복귀
      if (!isOnExample && currentIndex === 0) {
        showExample();
        return;
      }

      // 예시 상태에서 뒤로가기 눌러도 더 갈 곳 없음 (무시)
    });

    // 종료 버튼 (그냥 첫 화면으로 복귀)
    btnExit.addEventListener("click", () => {
      showScreen("start");
    });

    // 홈 버튼
    btnHome.addEventListener("click", () => {
      resetWords();
      showScreen("start");
    });

    showScreen("start");
  </script>

</body>
</html>
