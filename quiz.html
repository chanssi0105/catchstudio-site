<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ëª¸ìœ¼ë¡œ ë§í•´ìš” ì œì‹œì–´ ê²Œì„</title>
  <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <!-- ê¸°ë³¸ íŒŒë¹„ì½˜ -->
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon-quiz.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/assets/images/favicon-quiz.png">

  <!-- ì• í”Œ í™ˆ í™”ë©´ ì¶”ê°€ ì‹œ -->
  <link rel="apple-touch-icon" href="/assets/images/favicon-quiz.png">

  <style>
    * { box-sizing: border-box; }
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      height: 100%;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f3f4f6;
      color: #222;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: stretch;
      line-height:1.5;

      overscroll-behavior: none;
      touch-action: none; /* ê¸°ë³¸ì€ ìŠ¤í¬ë¡¤ ë§‰ê¸° */
    }

    .app {
      width: 100%;
      height:100vh;
      background: #ffffff;
      border-radius: 16px;
      padding: 2.5%;
      display: flex;
      flex-direction: column;
    }

    /* ---- ì„¸ë¡œëª¨ë“œ ìœ ë„ ì˜¤ë²„ë ˆì´ ---- */
    .orientation-lock {
      position: fixed;
      inset: 0;
      background: #020617;
      color: #f9fafb;
      display: none;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 24px;
      z-index: 99;
    }
    .orientation-inner {
      max-width: 320px;
    }
    .orientation-icon {
      font-size: 3rem;
      margin-bottom: 12px;
    }
    .orientation-text {
      font-size: 1.1rem;
      line-height: 1.5;
    }

    /* ì‘ì€ í™”ë©´ + ê°€ë¡œ ë°©í–¥ì¼ ë•Œ: ê²Œì„ ìˆ¨ê¸°ê³  ì„¸ë¡œ ì•ˆë‚´ë§Œ ë…¸ì¶œ */
    @media (orientation: landscape) and (max-width: 900px) {
      .app { display:none; }
      .orientation-lock { display:flex; }
    }

    /* ---- ê³µí†µ í™”ë©´ ---- */
    .screen { display: none; flex: 1; }
    .screen.active { display: flex; flex-direction: column;}
    #screen-ready, #screen-result{justify-content: center; height:100%;}

    /* ğŸ”¥ ì²« í™”ë©´(ì œì‹œì–´ ë¦¬ìŠ¤íŠ¸)ë§Œ ìŠ¤í¬ë¡¤ í—ˆìš© */
    #screen-list {
      flex: 1;
      min-height: 0;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
      touch-action: auto; /* ì—¬ê¸°ì„œëŠ” í„°ì¹˜ ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•˜ê²Œ í’€ê¸° */
      padding-bottom: 16px; /* ë§ˆì§€ë§‰ ì¤„ ì—¬ìœ  */
    }

    /* ---- í—¤ë” (ì œì‹œì–´ í™”ë©´ì—ì„œë§Œ ë³´ì„) ---- */
    .app-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      margin-bottom: 4px;
    }
    h1 {
      width: 100%;
      font-size: 2rem;
      margin: 0;
      text-align: center;
    }
    .subtitle {
      font-size: 1rem;
      text-align: center;
      color: #777;
      margin-bottom: 30px;
    }
    .icon-button {
      position:absolute;
      z-index:1;
      top:30px;
      right:30px;
      border: none;
      background: transparent;
      cursor: pointer;
      font-size: 1.3rem;
      padding: 4px;
    }

    /* ---- ì œì‹œì–´ ì„ íƒ ---- */
    .category-list {
      margin-top: 8px;
      display: grid;
      grid-template-columns: repeat(5, 1fr); /* 5ì—´ */
      gap: 20px;
      /* í•„ìš”í•˜ë‹¤ë©´ ì—¬ê¸°ì—ë„ touch-action:auto; ì¶”ê°€ ê°€ëŠ¥ */
    }
    .category-item {
      width: 100%;
      min-height:250px;
      padding: 25px;
      border-radius: 12px;
      border: 1px solid #e5e7eb;
      background: #f9fafb;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-direction: column;
      font-size: 2rem;
      font-weight:700;
      text-align:center;
    }
    .category-item span.sub {
      font-size: 1rem;
      color: #9ca3af;
    }
    .category-item:hover {
      background: #eff6ff;
      border-color: #3b82f6;
    }

    .big-word {
      font-size: 4rem;
      font-weight: 600;
      text-align: center;
      margin: 0 12px 20px;
      word-break: keep-all;
      line-height:1;
    }
    .info-text {
      font-size: 1.2rem;
      color: #6b7280;
      text-align: center;
      margin-bottom: 20px;
      line-height: 1.5;
    }

    .btn-row {
      display: flex;
      gap: 8px;
      justify-content: center;
      margin-top: 8px;
    }
    button {
      border: none;
      border-radius: 999px;
      padding: 14px 20px;
      font-size: 1.2rem;
      cursor: pointer;
      font-weight: 500;
    }
    .btn-primary { background: #3b82f6; color: white; }
    .btn-secondary { background: #e5e7eb; color: #111827; }
    .btn-ghost { background: transparent; color: #6b7280; }

    /* ---- ê²Œì„ í™”ë©´ ---- */
    #screen-game { height: 100%; }
    .game-inner {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      min-height: 0;
    }
    .game-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
      font-size: 0.95rem;
    }
    .badge {
      padding: 10px 16px;
      border-radius: 999px;
      font-size: 1.2rem;
      background: #f3f4f6;
    }
    .badge.timer {
      background: #fef3c7;
      color: #b45309;
    }
    .badge.score {
      background: #dbeafe;
      color: #1d4ed8;
    }
    .game-word-wrap {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 8px;
    }
    #game-word {
      font-size: clamp(7rem, 8vw, 13rem);
      font-weight: 700;
      text-align: center;
      word-break: keep-all;
      line-height: 1.1;
    }

    .ox-row {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin-top: 16px;
    }
    .btn-o, .btn-x {
      flex: 1;
      height:100px;
      padding: 20px;
      font-size: 2rem;
      font-weight:700;
      color: white;
    }
    .btn-o { background: #22c55e; }
    .btn-x { background: #ef4444; }

    .btn-pass {
      width: 100%;
      margin-top: 30px;
      background: #e5e7eb;
      color: #111827;
      padding: 20px;
      font-size: 2rem;
      font-weight:700;
    }
    .btn-pass:disabled {
      background: #f3f4f6;
      color: #9ca3af;
      cursor: default;
    }

    .result-number {
      font-size: clamp(7rem, 8vw, 20rem);
      font-weight: 700;
      text-align: center;
      margin: 0 0 10px;
      line-height:1;
    }
    .result-label {
      font-size: 1.2rem;
      text-align: center;
      color: #4b5563;
    }

    /* ---- ì„¤ì • ëª¨ë‹¬ ---- */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.4);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 50;
    }
    .modal {
      background: #ffffff;
      border-radius: 16px;
      padding: 16px 18px 14px;
      width: 100%;
      max-width: 360px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.18);
    }
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    .modal-title {
      font-size: 1rem;
      font-weight: 600;
    }
    .modal-close {
      border: none;
      background: transparent;
      font-size: 1.2rem;
      cursor: pointer;
    }
    .modal-body {
      font-size: 0.9rem;
      color: #4b5563;
      margin-bottom: 12px;
    }
    .timer-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 12px;
    }
    .timer-btn {
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 0.85rem;
      border: 1px solid #e5e7eb;
      background: #f9fafb;
      cursor: pointer;
    }
    .timer-btn.active {
      background: #3b82f6;
      border-color: #2563eb;
      color: #ffffff;
    }

    /* íŒ¨ìŠ¤ ì„¤ì • ë²„íŠ¼ */
    .pass-section-label {
      font-size: 0.9rem;
      color: #4b5563;
      margin: 4px 0 6px;
    }
    .pass-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 8px;
    }
    .pass-btn {
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 0.85rem;
      border: 1px solid #e5e7eb;
      background: #f9fafb;
      cursor: pointer;
    }
    .pass-btn.active {
      background: #3b82f6;
      border-color: #2563eb;
      color: #ffffff;
    }

    .modal-footer {
      display: flex;
      justify-content: flex-end;
      gap: 8px;
      margin-top: 4px;
    }
    .modal-footer button {
      padding: 8px 14px;
      font-size: 0.9rem;
    }
    .hidden {
      display: none;
    }

    @media (max-width: 1200px) {
      .category-list {
        grid-template-columns: repeat(4, 1fr);
      }
    }
    @media (max-width: 900px) {
      .category-list {
        grid-template-columns: repeat(3, 1fr);
      }
    }
    @media (min-width: 768px) {
      #game-word {font-size: 15rem;}
      .result-number{font-size: 20rem;}
    }
    @media (max-width: 600px) {
      .app{padding:5%;}
      .category-list {
        grid-template-columns: repeat(2, 1fr);
      }

      .icon-button {
        top:5%;
        right:5%;
      }

      h1, .subtitle {width:80%; text-align: left; word-break:keep-all;}
      .subtitle {width:100%;}
      .subtitle br{display:none;}
    }

  </style>
</head>
<body>
  <!-- ì„¸ë¡œëª¨ë“œ ì•ˆë‚´ ì˜¤ë²„ë ˆì´ -->
  <div id="orientation-lock" class="orientation-lock">
    <div class="orientation-inner">
      <div class="orientation-icon">ğŸ“±</div>
      <div class="orientation-text">
        ì´ ê²Œì„ì€ ì„¸ë¡œ í™”ë©´ì— ìµœì í™”ë˜ì–´ ìˆì–´.<br>
        ê¸°ê¸°ë¥¼ ì„¸ë¡œë¡œ ëŒë ¤ì„œ ì´ìš©í•´ì¤˜!
      </div>
    </div>
  </div>

  <div class="app">
    <!-- í—¤ë”ëŠ” ì²˜ìŒ í™”ë©´ì—ì„œë§Œ ë³´ì´ëŠ” ì˜ì—­ -->
    <div class="app-header" id="title-area">
      <h1>ëª¸ìœ¼ë¡œ ë§í•´ìš” ì œì‹œì–´ ê²Œì„</h1>
      <button class="icon-button" id="btn-settings">âš™ï¸</button>
    </div>
    <div class="subtitle" id="subtitle-area">
      ìš°ì¸¡ ìƒë‹¨ âš™ï¸ ë²„íŠ¼ìœ¼ë¡œ ë¼ìš´ë“œ ì‹œê°„ê³¼ íŒ¨ìŠ¤ íšŸìˆ˜ë¥¼ ì„¤ì •í•˜ê³ ,<br>
      ì œì‹œì–´ë¥¼ ê³¨ë¼ O / X / íŒ¨ìŠ¤ë¡œ ì§„í–‰í•´ë´!
    </div>

    <!-- ì‚¬ìš´ë“œ -->
    <audio id="bg-sound" src="sounds/tick-loop.mp3" preload="auto" loop></audio>
    <audio id="end-sound" src="sounds/time-up.mp3" preload="auto"></audio>
    <audio id="sound-correct" src="sounds/correct.mp3" preload="auto"></audio>
    <audio id="sound-wrong"   src="sounds/wrong.mp3" preload="auto"></audio>
    <audio id="sound-pass"    src="sounds/pass.mp3" preload="auto"></audio>

    <!-- 1. ì œì‹œì–´ ì„ íƒ -->
    <div id="screen-list" class="screen active">
      <div class="category-list" id="category-list"></div>
    </div>

    <!-- 2. ì¤€ë¹„ -->
    <div id="screen-ready" class="screen">
      <div class="big-word" id="ready-category"></div>
      <div class="info-text">
        ì„ íƒí•œ ì œì‹œì–´ ì¹´í…Œê³ ë¦¬ë¡œ ê²Œì„ì„ ì‹œì‘í•´!<br>
        ì œí•œ ì‹œê°„ ì•ˆì— ë§ì¶¤ / í‹€ë¦¼ / íŒ¨ìŠ¤ë¡œ ì§„í–‰í•˜ë©´ ë¼.<br>
        (íŒ¨ìŠ¤ íšŸìˆ˜ëŠ” ì„¤ì • í™”ë©´ì—ì„œ ì •í•  ìˆ˜ ìˆì–´)
      </div>
      <div class="btn-row">
        <button class="btn-secondary" id="btn-back-list">ì œì‹œì–´ ë‹¤ì‹œ ê³ ë¥´ê¸°</button>
        <button class="btn-primary" id="btn-start-game">ê²Œì„ ì‹œì‘</button>
      </div>
    </div>

    <!-- 3. ê²Œì„ -->
    <div id="screen-game" class="screen">
      <div class="game-inner">
        <div class="game-header">
          <div class="badge timer">ë‚¨ì€ ì‹œê°„: <span id="time-text">0:00</span></div>
          <div class="badge score">ë§ì¶˜ ê°œìˆ˜: <span id="score-text">0</span></div>
        </div>
        <div class="game-word-wrap">
          <div id="game-word"></div>
        </div>
        <div>
          <div class="ox-row">
            <button class="btn-o" id="btn-o">ì •ë‹µ! (O)</button>
            <button class="btn-x" id="btn-x">í‹€ë¦¼ (X)</button>
          </div>
          <!-- ì´ˆê¸° í…ìŠ¤íŠ¸ëŠ” ì–´ì°¨í”¼ startGameì—ì„œ ë®ì–´ì”€ -->
          <button class="btn-pass" id="btn-pass">íŒ¨ìŠ¤ (2íšŒ ë‚¨ìŒ)</button>
          <div class="btn-row">
            <button class="btn-ghost" id="btn-stop">ê²Œì„ ì¤‘ë‹¨</button>
          </div>
        </div>
      </div>
    </div>

    <!-- 4. ê²°ê³¼ -->
    <div id="screen-result" class="screen">
      <div class="result-label">ì´ë²ˆ ë¼ìš´ë“œì—ì„œ ë§íŒ ë¬¸ì œ ìˆ˜</div>
      <div class="result-number" id="result-score">0</div>
      <div class="info-text">
        ë‹¤ì‹œ í•˜ë ¤ë©´ ì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì œì‹œì–´ë¥¼ ê³ ë¥¸ ë’¤ ì‹œì‘í•´ì¤˜!
      </div>
      <div class="btn-row">
        <button class="btn-secondary" id="btn-result-to-list">ì œì‹œì–´ ëª©ë¡ìœ¼ë¡œ</button>
      </div>
    </div>
  </div>

  <!-- ì„¤ì • ëª¨ë‹¬ -->
  <div id="settings-backdrop" class="modal-backdrop hidden">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title">ê²Œì„ ì„¤ì •</div>
        <button class="modal-close" id="btn-settings-close">âœ•</button>
      </div>
      <div class="modal-body">
        ë¼ìš´ë“œ ì‹œê°„ê³¼ í•œ íŒë‹¹ íŒ¨ìŠ¤ íšŸìˆ˜ë¥¼ ì„¤ì •í•´ì¤˜.
      </div>

      <!-- ì‹œê°„ ì„¤ì • -->
      <div class="timer-buttons">
        <button class="timer-btn" data-seconds="30">30ì´ˆ</button>
        <button class="timer-btn" data-seconds="60">60ì´ˆ</button>
        <button class="timer-btn" data-seconds="90">90ì´ˆ</button>
        <button class="timer-btn" data-seconds="120">120ì´ˆ</button>
        <button class="timer-btn" data-seconds="180">180ì´ˆ</button>
      </div>

      <!-- íŒ¨ìŠ¤ ì„¤ì • -->
      <div class="pass-section-label">íŒ¨ìŠ¤ íšŸìˆ˜ (1 ~ 5íšŒ)</div>
      <div class="pass-buttons">
        <button class="pass-btn" data-pass="1">1íšŒ</button>
        <button class="pass-btn" data-pass="2">2íšŒ</button>
        <button class="pass-btn" data-pass="3">3íšŒ</button>
        <button class="pass-btn" data-pass="4">4íšŒ</button>
        <button class="pass-btn" data-pass="5">5íšŒ</button>
      </div>

      <div class="modal-footer">
        <button class="btn-secondary" id="btn-settings-ok">ë‹«ê¸°</button>
      </div>
    </div>
  </div>

  <script>
    /* ---- ë°ì´í„° ---- */
    const data = {
      "ğŸ¾ ë™ë¬¼": ["ê°•ì•„ì§€","ê³ ì–‘ì´","ë§","ë¼ì§€","ì†Œ","ë‹­","í† ë¼","ì‚¬ì","í˜¸ë‘ì´","ê³°","ì½”ë¼ë¦¬","ê¸°ë¦°","í­ê·„","ì›ìˆ­ì´","ê³ ë¦´ë¼","ë©§ë¼ì§€","ë‚™íƒ€","ëŠ‘ëŒ€","ìº¥ê±°ë£¨","í•˜ë§ˆ","íŒë‹¤","ìˆ˜ë‹¬","ë…ìˆ˜ë¦¬","ê³ ë˜","ìƒì–´","ë¬¼ê°œ","ë±€","ì—¬ìš°","ê³ ìŠ´ë„ì¹˜","í–„ìŠ¤í„°","ê°œêµ¬ë¦¬","ì•…ì–´","ê±°ë¯¸","ë¬¸ì–´","ê²Œ","ì–‘","íƒ€ì¡°","ê°œ","ì¥","ì—¼ì†Œ","ì˜¤ë¦¬","ê±°ë¶ì´","ì½”ë¿”ì†Œ","ì–¼ë£©ë§","ê°œì½”ì›ìˆ­ì´","ì¹¨íŒ¬ì§€","ë‚˜ë¬´ëŠ˜ë³´","ê°œë¯¸í•¥ê¸°"],
      "ğŸ… ìŠ¤í¬ì¸ ": ["ë³¼ë§","ìˆ˜ì˜","ë†êµ¬","í…Œë‹ˆìŠ¤","ë°°ë“œë¯¼í„´","ì¶•êµ¬","ê³¨í”„","íƒœê¶Œë„","ìœ ë„","íœì‹±","ë³µì‹±","ìŠ¤í‚¤","ìŠ¤ë…¸ë³´ë“œ","ì„œí•‘","ì»¬ë§","íƒêµ¬","ìŠ¹ë§ˆ","ì–‘ê¶","ë§ˆë¼í†¤","ì—­ë„","ì•„ì´ìŠ¤í•˜í‚¤","ìŠ¤ì¿¼ì‹œ","í´ë¼ì´ë°","ì²´ì¡°","ë°°êµ¬","ì”¨ë¦„","ì‚¬ì´í´","ì¡°ì •(ë…¸ ì “ê¸°)","ìš”ê°€","ì¤„ë„˜ê¸°","ë‹¬ë¦¬ê¸°(ë‹¨ê±°ë¦¬)","ì¤„ë‹¤ë¦¬ê¸°","ë ˆìŠ¬ë§","ê²€ë„","ë‹¹êµ¬","ìŠ¤ì¼€ì´íŠ¸","í”¼ê²¨ìŠ¤ì¼€ì´íŒ…","íŒ¨ëŸ¬ê¸€ë¼ì´ë”©","ì¤„íƒ€ê¸°", "ì²´ì¡°ë¦¬ë³¸","ë©€ë¦¬ë›°ê¸°","ì°½ë˜ì§€ê¸°","í”¼êµ¬","ì•¼êµ¬"],
      "ğŸ’¼ ì§ì—…": ["ìš”ë¦¬ì‚¬","ì¹˜ì–´ë¦¬ë”","ìŠ¤íŠœì–´ë””ìŠ¤","ì‹¬íŒ","ìƒë‹´ì›","ë°œë ˆë¦¬ë‚˜","ë§ˆìˆ ì‚¬","íƒë°°ê¸°ì‚¬","ì‚¬ëƒ¥ê¾¼","ê²½ì°°","ë¹„ë³´ì´","ê³¼í•™ì","ì†Œë°©ê´€","ë³´ë””ë¹Œë”","ìš”ê°€ê°•ì‚¬","ì¹´ë ˆì´ì„œ","ë‚˜ë¬´ê¾¼","í”„ë¡œë ˆìŠ¬ëŸ¬","ì§€íœ˜ì","ê´‘ë¶€","ì¡°ê°ê°€","í—¤ì–´ë””ìì´ë„ˆ","ëª¨ë¸","ì•„ë‚˜ìš´ì„œ","í”¼ì•„ë‹ˆìŠ¤íŠ¸","ë°”í…ë”","ë³µì‹±","í…Œë‹ˆìŠ¤","íƒœê¶Œë„","ìŠ¤ì¼€ì´íŒ…","ë¬´ì—íƒ€ì´","ë¦¬ë“¬ì²´ì¡°","ë§ˆë¼í†¤","ê²€ë„","ì—­ë„","ì•„ì´ìŠ¤í•˜í‚¤","ë†êµ¬","íœì‹±","ìŠ¤í‚¤","ê³¨í”„","íƒ€ì","íˆ¬ìˆ˜","í¬ìˆ˜","ì»¬ë§","íƒêµ¬","ì¶•êµ¬","ì–‘ê¶","ìˆ˜ì˜","ì„ ìƒë‹˜","ì˜ì‚¬","ì‚¬ì§„ì‘ê°€","ê°€ìˆ˜","ë“±ë°˜ê°€","êµ°ì¸","ê²½í˜¸ì›","ì²œë¬¸í•™ì","ì–´ë¶€"],
      "ğŸ” ìŒì‹&ê³¼ì¼": ["í”¼ì","í–„ë²„ê±°","ê¹€ë°¥","ë¼ë©´","ì¹˜í‚¨","ë§Œë‘","ìƒŒë“œìœ„ì¹˜","ìŠ¤í…Œì´í¬","í•«ë„ê·¸","ì‚¼ê²¹ì‚´","ì´ˆë°¥","íƒ€ì½”","ë°”ë‚˜ë‚˜","ìˆ˜ë°•","í¬ë„","ì‚¬ê³¼","ì˜¤ë Œì§€","ë ˆëª¬","ë”¸ê¸°","ë©œë¡ ","ë°°","ê°„ì¥ê²Œì¥","ì•„ì´ìŠ¤í¬ë¦¼","ë„ë„›","ë¹„ë¹”ë°¥","ì†Œì‹œì§€","ê¹€ì¹˜","ë‹¬ê±€í”„ë¼ì´","ë–¡ê¼¬ì¹˜","ë¶•ì–´ë¹µ","ì–´ë¬µ","ê·¤","ê³ ì¶”","ì–‘íŒŒ","ì˜¤ì´","ì˜¥ìˆ˜ìˆ˜","ë–¡","ìƒì„ ","ë°¥","ë”¸ê¸°ì¼","ì‚¬íƒ•","ìƒëŸ¬ë“œ","ì§œì¥ë©´","ì§¬ë½•","íƒ•ìˆ˜ìœ¡","ì¡±ë°œ","ìš°ìœ ","ê³¶ê°","ì£½","ê°ì","í•´ë¬¼íƒ•","ë–¡ë³¶ì´","ìˆœëŒ€êµ­","ì½©","ë¬¼","ì†Œê¸ˆ"],
      "ğŸ˜Š ê°ì •&íƒˆê²ƒ": ["ë§","í¬í¬ë ˆì¸","í›„íšŒ","ë¹„í–‰ê¸°","ë¶„ë…¸","ì„œí•‘ë³´ë“œ","ì§ˆíˆ¬","ë²„ìŠ¤","í¸ì•ˆí•¨","ê¸°ì°¨","ê¸°ì¨","íŠ¸ëŸ­","ì—´ê´‘","í—¬ë¦¬ì½¥í„°","ì¹´ëˆ„","ì§‘ì°©","íŠ¸ëŸ­","ì„œí•‘ë³´ë“œ","ìì „ê±°","íë­‡í•¨","ê²½ì°°ì°¨","í‚¥ë³´ë“œ","ë¯¼ë§í•¨","ê²¬ì¸ì°¨","ìŠ¬í””","ë‹¹í™©","ë¿Œë“¯í•¨","ë†€ëŒ","ì•„ì‰¬ì›€","ìŠ¤ì¼€ì´íŠ¸ ë³´ë“œ","ì§€ë£¨í•¨","í”¼ê³¤í•¨","ê¸´ì¥","ëƒ‰ë‹´í•¨","í—ˆì„¸","ë°°"],
      "ğŸ“¦ ì‚¬ë¬¼": ["ì—´ì‡ ","ì˜·ì¥","ì‹œê³„","ì‹ ë¬¸","ë¼ë””ì˜¤","ì†ŒíŒŒ","ì—ì–´ì»¨","ì„ í’ê¸°","ì²­ì†Œê¸°","í…”ë ˆë¹„ì „","ì»´í“¨í„°","ì°½ë¬¸","íœ´ëŒ€í°","ì¹´ë©”ë¼","ì¹¨ëŒ€","ì¹ íŒ","ì¹«ì†”","ì¹˜ì•½","í™”ì¥ì§€","ë³€ê¸°","ì„¸ìˆ«ëŒ€ì•¼","íœ´ì§€í†µ","ìˆ˜ê±´","ë°”ê°€ì§€","ì²´ì¤‘ê³„","ê±°ìš¸","ë“œë¼ì´ê¸°","ì„¸ë©´ëŒ€","ìƒ´í‘¸","ë¹—","ë¹„ëˆ„","ìš•ì¡°","ìƒ¤ì›Œê¸°","ë¶","ë¡œë´‡","í¬ë ˆíŒŒìŠ¤","ê³µ","ê³°ì¸í˜•","ë¸”ë¡","íŒ½ì´","ìŠ¤ì¼€ì¹˜ë¶","ì„¸ë°œìì „ê±°","í’ì„ ","ì‹¤ë¡œí°","ì‹œì†Œ","ë¬¼ë¿Œë¦¬ê°œ","ë¯¸ë„ëŸ¼í‹€","ê¸°íƒ€","ë°”ì´ì˜¬ë¦°","ìš°ì‚°","ì¥í™”","ëª©ê±¸ì´","ì¥ê°‘","ê°€ë°©","ì¸í˜•","ê±´ì „ì§€","ì¡ì§€","ì˜¤ë¸","ì§€í","ë°˜ì§€","ëª»","ì¹¼","ë¹—ìë£¨","ì´ì–´í°","ê°€ìœ„","ë§ì¹˜","ë‚šì‹¯ëŒ€","ë¼ì´í„°","í…íŠ¸","ë‹ë³´ê¸°","ì „ê¸°ë°¥ì†¥","í‚¤ë³´ë“œ","ë§ˆìš°ìŠ¤","ì˜ì","ì§€ê°‘","ì„ ê¸€ë¼ìŠ¤","ìºë¦¬ì–´","ë“œë¡ ","ë—ìë¦¬","ë¶•ëŒ€","í™”ì¥í’ˆ íŒŒìš°ì¹˜","ìŠ¤ë§ˆíŠ¸ì›Œì¹˜","ë¦¬ëª¨ì»¨","ì…€ì¹´ë´‰","ë§ì›ê²½"]
    };

    /* ---- DOM ---- */
    const screenList   = document.getElementById("screen-list");
    const screenReady  = document.getElementById("screen-ready");
    const screenGame   = document.getElementById("screen-game");
    const screenResult = document.getElementById("screen-result");
    const titleArea    = document.getElementById("title-area");
    const subtitleArea = document.getElementById("subtitle-area");

    const categoryListEl   = document.getElementById("category-list");
    const readyCategoryEl  = document.getElementById("ready-category");
    const gameWordEl       = document.getElementById("game-word");
    const timeTextEl       = document.getElementById("time-text");
    const scoreTextEl      = document.getElementById("score-text");
    const resultScoreEl    = document.getElementById("result-score");
    const btnBackList      = document.getElementById("btn-back-list");
    const btnStartGame     = document.getElementById("btn-start-game");
    const btnO             = document.getElementById("btn-o");
    const btnX             = document.getElementById("btn-x");
    const btnPass          = document.getElementById("btn-pass");
    const btnStop          = document.getElementById("btn-stop");
    const btnResultToList  = document.getElementById("btn-result-to-list");
    const btnSettings      = document.getElementById("btn-settings");
    const settingsBackdrop = document.getElementById("settings-backdrop");
    const btnSettingsClose = document.getElementById("btn-settings-close");
    const btnSettingsOk    = document.getElementById("btn-settings-ok");

    const timerButtons     = settingsBackdrop.querySelectorAll(".timer-btn");
    const passButtons      = settingsBackdrop.querySelectorAll(".pass-btn");

    const bgSound      = document.getElementById("bg-sound");
    const endSound     = document.getElementById("end-sound");
    const soundCorrect = document.getElementById("sound-correct");
    const soundWrong   = document.getElementById("sound-wrong");
    const soundPass    = document.getElementById("sound-pass");

    /* ---- ìƒíƒœ ---- */
    let selectedTimeSec = 60;
    let currentCategory = null;
    let currentIndex = 0;
    let currentWords = [];
    let score = 0;
    let timeLeft = 60;
    let timerId = null;
    let passCount = 0;
    let selectedPassCount = 2; // ê¸°ë³¸ íŒ¨ìŠ¤ 2íšŒ

    /* ---- ê³µí†µ ---- */
    function shuffle(arr) {
      const a = arr.slice();
      for (let i=a.length-1; i>0; i--) {
        const j = Math.floor(Math.random()*(i+1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }
    function formatTime(sec) {
      const m = Math.floor(sec/60);
      const s = sec%60;
      return m + ":" + (s<10 ? "0"+s : s);
    }

    /* ---- í™”ë©´ í‘œì‹œ ì œì–´ (íƒ€ì´í‹€/í†±ë‹ˆ í¬í•¨) ---- */
    function showScreen(target) {
      [screenList, screenReady, screenGame, screenResult].forEach(s => s.classList.remove("active"));
      target.classList.add("active");

      const isListScreen = (target === screenList);
      titleArea.style.display = isListScreen ? "flex" : "none";
      subtitleArea.style.display = isListScreen ? "block" : "none";
      btnSettings.style.display = isListScreen ? "block" : "none";
    }

    /* ---- ì„¤ì • ëª¨ë‹¬ : ì‹œê°„ ---- */
    function setSelectedTime(sec) {
      selectedTimeSec = sec;
      timerButtons.forEach(btn=>{
        btn.classList.toggle("active", Number(btn.dataset.seconds)===sec);
      });
    }

    /* ---- ì„¤ì • ëª¨ë‹¬ : íŒ¨ìŠ¤ ---- */
    function setSelectedPass(count) {
      selectedPassCount = count;
      passButtons.forEach(btn=>{
        btn.classList.toggle("active", Number(btn.dataset.pass)===count);
      });
    }

    btnSettings.addEventListener("click", ()=> {
      setSelectedTime(selectedTimeSec);
      setSelectedPass(selectedPassCount);
      settingsBackdrop.classList.remove("hidden");
    });
    btnSettingsClose.addEventListener("click", ()=> settingsBackdrop.classList.add("hidden"));
    btnSettingsOk.addEventListener("click", ()=> settingsBackdrop.classList.add("hidden"));

    timerButtons.forEach(btn=>{
      btn.addEventListener("click", ()=> setSelectedTime(Number(btn.dataset.seconds)));
    });
    passButtons.forEach(btn=>{
      btn.addEventListener("click", ()=> setSelectedPass(Number(btn.dataset.pass)));
    });

    settingsBackdrop.addEventListener("click", e=>{
      if(e.target===settingsBackdrop) settingsBackdrop.classList.add("hidden");
    });

    /* ---- íŒ¨ìŠ¤ ë²„íŠ¼ ì—…ë°ì´íŠ¸ ---- */
    function updatePassButton() {
      const r = selectedPassCount - passCount;
      btnPass.textContent = `íŒ¨ìŠ¤ (${r}íšŒ ë‚¨ìŒ)`;
      btnPass.disabled = r<=0;
    }

    /* ---- ì‚¬ìš´ë“œ (ì‚¬ìš© ì•ˆ í•˜ëŠ” ë˜í¼ëŠ” ê·¸ëŒ€ë¡œ ë‘ ) ---- */
    function playCorrectSound(){ try{soundCorrect.currentTime=0; soundCorrect.play();}catch{} }
    function playWrongSound(){   try{soundWrong.currentTime=0;   soundWrong.play();}catch{} }
    function playPassSound(){    try{soundPass.currentTime=0;    soundPass.play();}catch{} }

    /* ---- ê²Œì„ ë¡œì§ ---- */
    function openReadyScreen() {
      const parts = currentCategory.split(" ");
      readyCategoryEl.textContent = parts.length>1 ? parts.slice(1).join(" ") : currentCategory;
      showScreen(screenReady);
    }

    function startGame() {
      score = 0;
      timeLeft = selectedTimeSec;
      passCount = 0;

      scoreTextEl.textContent = score;
      timeTextEl.textContent = formatTime(timeLeft);
      updatePassButton();

      currentWords = shuffle(data[currentCategory]);
      currentIndex = 0;
      gameWordEl.textContent = currentWords[currentIndex];

      if(timerId) clearInterval(timerId);
      timerId = setInterval(()=>{
        timeLeft--;
        if(timeLeft<=0) {
          timeLeft = 0;
          timeTextEl.textContent = formatTime(timeLeft);
          endGame();
        } else {
          timeTextEl.textContent = formatTime(timeLeft);
        }
      },1000);

      try{bgSound.currentTime=0; bgSound.play();}catch{}
      showScreen(screenGame);
    }

    function goNextWord() {
      // ì´ë¯¸ ë§ˆì§€ë§‰ ë‹¨ì–´ê¹Œì§€ ì¼ë‹¤ë©´ -> ë¼ìš´ë“œ ì¢…ë£Œ
      if (currentIndex >= currentWords.length - 1) {
        endGame();
        return;
      }

      // ì•„ì§ ë‚¨ì€ ë‹¨ì–´ê°€ ìˆìœ¼ë©´ ë‹¤ìŒ ë‹¨ì–´ë¡œ
      currentIndex++;
      gameWordEl.textContent = currentWords[currentIndex];
    }


    function endGame() {
      if(timerId) { clearInterval(timerId); timerId=null; }
      try{ bgSound.pause(); bgSound.currentTime=0; }catch{}
      try{ endSound.currentTime=0; endSound.play(); }catch{}
      resultScoreEl.textContent = score;
      showScreen(screenResult);
    }

    /* ---- ë²„íŠ¼ ì´ë²¤íŠ¸ ---- */
    btnStartGame.addEventListener("click", () => {
      // ğŸ”Š ì¢…ë£Œ íš¨ê³¼ìŒ ì‚¬ìš´ë“œ ê¶Œí•œ ë¯¸ë¦¬ í™•ë³´
      endSound.play().then(() => {
        endSound.pause();
        endSound.currentTime = 0;
      }).catch(() => {});

      // ğŸ–¥ ì „ì²´í™”ë©´ ìš”ì²­
      const docEl = document.documentElement;
      if (docEl.requestFullscreen) {
        docEl.requestFullscreen().catch(() => {});
      } else if (docEl.webkitRequestFullscreen) {
        docEl.webkitRequestFullscreen();
      }

      // ğŸ® ê²Œì„ ì‹œì‘
      startGame();
    });

    btnBackList.addEventListener("click", ()=> showScreen(screenList));
    btnResultToList.addEventListener("click", ()=> showScreen(screenList));
    btnStop.addEventListener("click", ()=> endGame());

    btnO.addEventListener("click", ()=>{
      score++; scoreTextEl.textContent=score;
      try{ soundCorrect.currentTime=0; soundCorrect.play(); }catch{}
      goNextWord();
    });
    btnX.addEventListener("click", ()=>{
      try{ soundWrong.currentTime=0; soundWrong.play(); }catch{}
      goNextWord();
    });
    btnPass.addEventListener("click", ()=>{
      if(passCount>=selectedPassCount) return;
      passCount++;
      updatePassButton();
      try{ soundPass.currentTime=0; soundPass.play(); }catch{}
      goNextWord();
    });

    /* ---- ì¹´í…Œê³ ë¦¬ ë Œë”ë§ ---- */
    function renderCategoryList() {
      categoryListEl.innerHTML = "";
      Object.keys(data).forEach(name=>{
        const count = data[name].length;
        const parts = name.split(" ");
        const emoji = parts[0];
        const label = parts.slice(1).join(" ");
        const btn = document.createElement("button");
        btn.className = "category-item";
        btn.innerHTML = `
          <div style="display:flex;flex-direction:column;align-items:center;">
            <span style="margin-bottom:5px;font-size:3rem;line-height:1;">${emoji}</span>
            <span>${label}</span>
          </div>
          <span class="sub">${count} ë¬¸ì œ</span>
        `;
        btn.addEventListener("click", ()=>{
          currentCategory = name;
          openReadyScreen();
        });
        categoryListEl.appendChild(btn);
      });
    }

    /* ---- ì´ˆê¸° ë Œë” ---- */
    renderCategoryList();
    // ì´ˆê¸° ì„¤ì • ì„ íƒ í‘œì‹œ
    setSelectedTime(selectedTimeSec);
    setSelectedPass(selectedPassCount);
  </script>
</body>
</html>
